<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto G29</title>
    <link rel="icon" href="image/favicon.png" type="image/png">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="stylesheet" href="css/estilo.css">

</head>

<body>
    <div class="container" align="center">
        <header>            
            <h1>
                Machinery Rent
            </h1>
        </header>

        <nav>
            <div class="btn-group">
                <a href="index.html" class="btn btn-warning">Inicio</a>
                <a href="cliente.html" class="btn btn-warning">Cliente</a>
                <a href="maquinaria.html" class="btn btn-warning active" aria-current="page">Maquinaria</a>
                <a href="contacto.html" class="btn btn-warning">Contacto</a>
            </div>
        </nav>

        <img src="image/imagen_header.png" width="50%">
        <br>
        <br>
        <br>
        <div class="row">
            <div class="col" align="center">
                <label for="id" class="form-label">ID</label>
                <input type="number" class="form-control" id="id" placeholder="0">
            </div>
            <div class="col" align="center">
                <label for="brand" class="form-label">BRAND</label>
                <input type="text" class="form-control" id="brand" placeholder="eso">
            </div>
            <div class="col" align="center">
                <label for="model" class="form-label">MODEL</label>
                <input type="number" class="form-control" id="model" placeholder="0">
            </div>
            <div class="col" align="center">
                <label for="category_id" class="form-label">ID CATEGORY</label>
                <input type="number" class="form-control" id="category_id" placeholder="0">
            </div>
            <div class="col" align="center">
                <label for="name" class="form-label">NAME</label>
                <input type="text" class="form-control" id="name" placeholder="name">
            </div>
        </div>
        <br>
        <br>
        <div class="row">
            <div class="col" align="center">
            </div>
            <div class="col" align="center">
                <button type="button" class="btn btn-success" onclick="crear()"> Crear</button>
            </div>
            <div class="col" align="center">
            </div>
            <div class="col" align="center">
                <button type="button" class="btn btn-warning" onclick="modificar()">Modificar</button>
            </div>
            <div class="col" align="center">
            </div>
            <div class="col" align="center">
                <button type="button" class="btn btn-danger" onclick="borrar()">Borrar</button>
            </div>
            <div class="col" align="center">
            </div>
        </div>
        <br>
        <br>

    </div>
    <table class="table table-bordered" align="center">
        <thead>
            <tr align="center">
                <th>id</th>
                <th>brand</th>
                <th>model</th>
                <th>category_id</th>
                <th>name</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
        <tfoot>
            <tr >
                <td>id</td>
                <td>brand</td>
                <td>model</td>
                <td>category_id</td>
                <td>name</td>
            </tr>
        </tfoot>
    </table>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script>
        function consultar() {
            $.ajax({
                url: "https://g93b01c51b4cf1d-db202109231132.adb.ca-toronto-1.oraclecloudapps.com/ords/admin/machine/machine",
                type: "GET",
                dataType: "json",
                success: function (response) {
                    $('tbody').empty();
                    console.log(response);
                    response.items.forEach(element => {
                        var row = $('<tr>');
                        row.append($('<td>').text(element.id));
                        row.append($('<td>').text(element.brand));
                        row.append($('<td>').text(element.model));
                        row.append($('<td>').text(element.category_id));
                        row.append($('<td>').text(element.name));
                        $('tbody').append(row);
                    });
                }
            });
        }
        function crear() {
            var id = $("#id").val();
            var brand = $("#brand").val();
            var model = $("#model").val();
            var category_id = $("#category_id").val();
            var name = $("#name").val();
            $.ajax({
                url: "https://g93b01c51b4cf1d-db202109231132.adb.ca-toronto-1.oraclecloudapps.com/ords/admin/machine/machine",
                type: "POST",
                dataType: "json",
                data: {
                    id: id,
                    brand: brand,
                    model: model,
                    category_id: category_id,
                    name: name
                },
                statusCode: {
                    201: function () {
                        consultar();
                    },
                    200: function () {
                        console.log("-1-1-1-1 WE GOT 200!");
                    }
                },
            });
        }
        $(document).ready(function () {
            consultar();
        });

    </script>
</body>

</html>